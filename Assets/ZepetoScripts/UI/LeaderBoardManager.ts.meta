fileFormatVersion: 2
guid: 1bf0a79d56a34b7469d1da89b559dba5
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst
    ZEPETO_Script_Leaderboard_1 = require(\"ZEPETO.Script.Leaderboard\");\r\nconst
    UnityEngine_1 = require(\"UnityEngine\");\r\nconst ITM_LeaderBoard_1 = require(\"./ITM_LeaderBoard\");\r\nclass
    LeaderboardManager extends ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    constructor()
    {\r\n        super(...arguments);\r\n        this.leaderboardId = \"1ee41bb4-932f-4f6b-a9fb-653f9e556e01\";\r\n       
    this.startRank = 1;\r\n        this.endRank = 10000; // Ranking information can
    be processed up to 10,000 cases at a time\r\n    }\r\n    /* Singleton */\r\n   
    Awake() {\r\n        if (LeaderboardManager.instance == null) {\r\n           
    LeaderboardManager.instance = this;\r\n        }\r\n        else {\r\n           
    return;\r\n        }\r\n    }\r\n    Start() {\r\n        this.m_LeaderboardBtn.onClick.AddListener(()
    => {\r\n            this.UnLoadLeaderboard();\r\n            this.SendScore(0);\r\n           
    this.StartCoroutine(this.LoadLeaderboard());\r\n        });\r\n    }\r\n    SendScore(score)
    {\r\n        this.myBestScore = (score < this.myBestScore || this.myBestScore
    == 0) ? score : this.myBestScore;\r\n        ZEPETO_Script_Leaderboard_1.LeaderboardAPI.SetScore(this.leaderboardId,
    score, (result) => { console.log(`result.isSuccess: ${result.isSuccess}`); },
    (error) => { console.error(error); });\r\n        return this.myBestScore;\r\n   
    }\r\n    *LoadLeaderboard() {\r\n        let isResponsed = false;\r\n       
    for (let i = 0; i < 100; i++) {\r\n            ZEPETO_Script_Leaderboard_1.LeaderboardAPI.GetRangeRank(this.leaderboardId,
    i * 10, i * 10 + 10, this.resetRule, false, (result) => {\r\n               
    this.OnResult(result);\r\n                isResponsed = true;\r\n           
    }, (error) => {\r\n                console.error(error);\r\n                isResponsed
    = true;\r\n            });\r\n            yield new UnityEngine_1.WaitUntil(()
    => isResponsed);\r\n            isResponsed = false;\r\n        }\r\n    }\r\n   
    OnResult(result) {\r\n        if (result.rankInfo.myRank) {\r\n            //
    Set Group - My Score\r\n            var myRank = result.rankInfo.myRank;\r\n           
    const _ITM = this.myScoreGroup.GetComponent($typeof(ITM_LeaderBoard_1.default));\r\n           
    this.myBestScore = myRank.score;\r\n            _ITM.SetGroup(myRank.member,
    myRank.name, myRank.rank, myRank.score);\r\n        }\r\n        if (result.rankInfo.rankList)
    {\r\n            var end = (result.rankInfo.rankList.length < this.endRank) ?
    result.rankInfo.rankList.length : this.endRank;\r\n            for (let i = 0;
    i < end; ++i) {\r\n                var rank = result.rankInfo.rankList[i];\r\n               
    // Set Groups - All Rankings\r\n                var newGroup = UnityEngine_1.GameObject.Instantiate(this.ITM_Prefab,
    this.contentsParent.transform);\r\n                const _ITM = newGroup.GetComponent($typeof(ITM_LeaderBoard_1.default));\r\n               
    _ITM.SetGroup(rank.member, rank.name, rank.rank, rank.score);\r\n           
    }\r\n        }\r\n    }\r\n    UnLoadLeaderboard() {\r\n        this.contentsParent.GetComponentsInChildren($typeof(ITM_LeaderBoard_1.default)).forEach((child)
    => {\r\n            UnityEngine_1.GameObject.Destroy(child.gameObject);\r\n       
    });\r\n    }\r\n}\r\nexports.default = LeaderboardManager;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGVhZGVyQm9hcmRNYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiTGVhZGVyQm9hcmRNYW5hZ2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaURBQXFEO0FBQ3JELHlFQUE0RjtBQUM1Riw2Q0FBK0Q7QUFDL0QsdURBQStDO0FBRS9DLE1BQXFCLGtCQUFtQixTQUFRLHFDQUFxQjtJQUFyRTs7UUFFVyxrQkFBYSxHQUFXLHNDQUFzQyxDQUFBO1FBRTdELGNBQVMsR0FBVyxDQUFDLENBQUM7UUFDdEIsWUFBTyxHQUFXLEtBQUssQ0FBQyxDQUFDLG9FQUFvRTtJQWtGekcsQ0FBQztJQXhFRyxlQUFlO0lBQ1AsS0FBSztRQUNULElBQUksa0JBQWtCLENBQUMsUUFBUSxJQUFJLElBQUksRUFBRTtZQUNyQyxrQkFBa0IsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1NBQ3RDO2FBQU07WUFDSCxPQUFPO1NBQ1Y7SUFDTCxDQUFDO0lBQ08sS0FBSztRQUNULElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEdBQUUsRUFBRTtZQUMxQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUN6QixJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xCLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUM7UUFDaEQsQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0lBRU0sU0FBUyxDQUFDLEtBQWE7UUFDMUIsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLElBQUksQ0FBQyxDQUFDLENBQUEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUNqRywwQ0FBYyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLEtBQUssRUFD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","assetPath":"Assets/ZepetoScripts/UI/LeaderBoardManager.ts","manifest":{"properties":[{"assembly":"mscorlib","name":"leaderboardId","type":"System.String","isArray":false,"initValue":["1ee41bb4-932f-4f6b-a9fb-653f9e556e01"],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"ZEPETO.Script.Leaderboard","name":"resetRule","type":"ZEPETO.Script.Leaderboard.ResetRule","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"myScoreGroup","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[{"name":"SerializeField","args":[]}]},{"assembly":"UnityEngine.CoreModule","name":"contentsParent","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[{"name":"SerializeField","args":[]}]},{"assembly":"UnityEngine.CoreModule","name":"ITM_Prefab","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[{"name":"SerializeField","args":[]}]},{"assembly":"UnityEngine.UI","name":"m_LeaderboardBtn","type":"UnityEngine.UI.Button","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[{"name":"SerializeField","args":[]}]}],"name":"LeaderboardManager","description":""},"isCompiled":true}'
  typescriptHash: a534942a108304bd1587b25ed7d24ff5
  onlyWriteTrigger: 0
